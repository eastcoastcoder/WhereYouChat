{"version":3,"sources":["resources/leaflet.draw/draw/handler/Draw.Marker.js"],"names":["L","Draw","Marker","Feature","extend","statics","TYPE","options","icon","Icon","Default","repeatMode","zIndexOffset","initialize","map","type","_initialLabelText","drawLocal","draw","handlers","marker","tooltip","start","prototype","call","addHooks","_map","_tooltip","updateContent","text","_mouseMarker","getCenter","divIcon","className","iconAnchor","iconSize","opacity","on","_onClick","addTo","_onMouseMove","_onTouch","removeHooks","off","_marker","removeLayer","e","latlng","updatePosition","setLatLng","getLatLng","_createMarker","addLayer","_fireCreatedEvent","disable","enable","Touch"],"mappings":";AAKAA,EAAEC,KAAKC,OAASF,EAAEC,KAAKE,QAAQC,OAAO,CACrCC,QAAS,CACRC,KAAM,UAGPC,QAAS,CACRC,KAAM,IAAIR,EAAES,KAAKC,QACjBC,YAAY,EACZC,aAAc,KAIfC,WAAY,SAAUC,EAAKP,GAErBQ,KAAAA,KAAOf,EAAEC,KAAKC,OAAOI,KAErBU,KAAAA,kBAAoBhB,EAAEiB,UAAUC,KAAKC,SAASC,OAAOC,QAAQC,MAElEtB,EAAEC,KAAKE,QAAQoB,UAAUV,WAAWW,KAAK,KAAMV,EAAKP,IAKrDkB,SAAU,WACTzB,EAAEC,KAAKE,QAAQoB,UAAUE,SAASD,KAAK,MAEnC,KAAKE,OACHC,KAAAA,SAASC,cAAc,CAACC,KAAM,KAAKb,oBAGnC,KAAKc,eACJA,KAAAA,aAAe9B,EAAEoB,OAAO,KAAKM,KAAKK,YAAa,CACnDvB,KAAMR,EAAEgC,QAAQ,CACfC,UAAW,uBACXC,WAAY,CAAC,GAAI,IACjBC,SAAU,CAAC,GAAI,MAEhBC,QAAS,EACTxB,aAAc,KAAKL,QAAQK,gBAIxBkB,KAAAA,aACHO,GAAG,QAAS,KAAKC,SAAU,MAC3BC,MAAM,KAAKb,MAERA,KAAAA,KAAKW,GAAG,YAAa,KAAKG,aAAc,MACxCd,KAAAA,KAAKW,GAAG,QAAS,KAAKI,SAAU,QAMvCC,YAAa,WACZ1C,EAAEC,KAAKE,QAAQoB,UAAUmB,YAAYlB,KAAK,MAEtC,KAAKE,OACHA,KAAAA,KACHiB,IAAI,QAAS,KAAKL,SAAU,MAC5BK,IAAI,QAAS,KAAKF,SAAU,MAC1B,KAAKG,UACHA,KAAAA,QAAQD,IAAI,QAAS,KAAKL,SAAU,MACpCZ,KAAAA,KACHmB,YAAY,KAAKD,gBACZ,KAAKA,SAGRd,KAAAA,aAAaa,IAAI,QAAS,KAAKL,SAAU,MACzCZ,KAAAA,KAAKmB,YAAY,KAAKf,qBACpB,KAAKA,aAEPJ,KAAAA,KAAKiB,IAAI,YAAa,KAAKH,aAAc,QAIhDA,aAAc,SAAUM,GACnBC,IAAAA,EAASD,EAAEC,OAEVpB,KAAAA,SAASqB,eAAeD,GACxBjB,KAAAA,aAAamB,UAAUF,GAEvB,KAAKH,SASTG,EAAS,KAAKjB,aAAaoB,YACtBN,KAAAA,QAAQK,UAAUF,KATlBH,KAAAA,QAAU,KAAKO,cAAcJ,GAE7BH,KAAAA,QAAQP,GAAG,QAAS,KAAKC,SAAU,MACnCZ,KAAAA,KACHW,GAAG,QAAS,KAAKC,SAAU,MAC3Bc,SAAS,KAAKR,WAQlBO,cAAe,SAAUJ,GACjB,OAAA,IAAI/C,EAAEE,OAAO6C,EAAQ,CAC3BvC,KAAM,KAAKD,QAAQC,KACnBI,aAAc,KAAKL,QAAQK,gBAI7B0B,SAAU,WACJe,KAAAA,oBAEAC,KAAAA,UACD,KAAK/C,QAAQI,YACX4C,KAAAA,UAIPd,SAAU,SAAUK,GAEdN,KAAAA,aAAaM,GACbR,KAAAA,YAGNe,kBAAmB,WACdjC,IAAAA,EAAS,IAAIpB,EAAEE,OAAOsD,MAAM,KAAKZ,QAAQM,YAAa,CAAC1C,KAAM,KAAKD,QAAQC,OAC9ER,EAAEC,KAAKE,QAAQoB,UAAU8B,kBAAkB7B,KAAK,KAAMJ","file":"Draw.Marker.bfa0a584.map","sourceRoot":"..","sourcesContent":["/**\n * @class L.Draw.Marker\n * @aka Draw.Marker\n * @inherits L.Draw.Feature\n */\nL.Draw.Marker = L.Draw.Feature.extend({\n\tstatics: {\n\t\tTYPE: 'marker'\n\t},\n\n\toptions: {\n\t\ticon: new L.Icon.Default(),\n\t\trepeatMode: false,\n\t\tzIndexOffset: 2000 // This should be > than the highest z-index any markers\n\t},\n\n\t// @method initialize(): void\n\tinitialize: function (map, options) {\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.Draw.Marker.TYPE;\n\n\t\tthis._initialLabelText = L.drawLocal.draw.handlers.marker.tooltip.start;\n\n\t\tL.Draw.Feature.prototype.initialize.call(this, map, options);\n\t},\n\n\t// @method addHooks(): void\n\t// Add listener hooks to this handler.\n\taddHooks: function () {\n\t\tL.Draw.Feature.prototype.addHooks.call(this);\n\n\t\tif (this._map) {\n\t\t\tthis._tooltip.updateContent({text: this._initialLabelText});\n\n\t\t\t// Same mouseMarker as in Draw.Polyline\n\t\t\tif (!this._mouseMarker) {\n\t\t\t\tthis._mouseMarker = L.marker(this._map.getCenter(), {\n\t\t\t\t\ticon: L.divIcon({\n\t\t\t\t\t\tclassName: 'leaflet-mouse-marker',\n\t\t\t\t\t\ticonAnchor: [20, 20],\n\t\t\t\t\t\ticonSize: [40, 40]\n\t\t\t\t\t}),\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tzIndexOffset: this.options.zIndexOffset\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._mouseMarker\n\t\t\t\t.on('click', this._onClick, this)\n\t\t\t\t.addTo(this._map);\n\n\t\t\tthis._map.on('mousemove', this._onMouseMove, this);\n\t\t\tthis._map.on('click', this._onTouch, this);\n\t\t}\n\t},\n\n\t// @method removeHooks(): void\n\t// Remove listener hooks from this handler.\n\tremoveHooks: function () {\n\t\tL.Draw.Feature.prototype.removeHooks.call(this);\n\n\t\tif (this._map) {\n\t\t\tthis._map\n\t\t\t\t.off('click', this._onClick, this)\n\t\t\t\t.off('click', this._onTouch, this);\n\t\t\tif (this._marker) {\n\t\t\t\tthis._marker.off('click', this._onClick, this);\n\t\t\t\tthis._map\n\t\t\t\t\t.removeLayer(this._marker);\n\t\t\t\tdelete this._marker;\n\t\t\t}\n\n\t\t\tthis._mouseMarker.off('click', this._onClick, this);\n\t\t\tthis._map.removeLayer(this._mouseMarker);\n\t\t\tdelete this._mouseMarker;\n\n\t\t\tthis._map.off('mousemove', this._onMouseMove, this);\n\t\t}\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tvar latlng = e.latlng;\n\n\t\tthis._tooltip.updatePosition(latlng);\n\t\tthis._mouseMarker.setLatLng(latlng);\n\n\t\tif (!this._marker) {\n\t\t\tthis._marker = this._createMarker(latlng);\n\t\t\t// Bind to both marker and map to make sure we get the click event.\n\t\t\tthis._marker.on('click', this._onClick, this);\n\t\t\tthis._map\n\t\t\t\t.on('click', this._onClick, this)\n\t\t\t\t.addLayer(this._marker);\n\t\t}\n\t\telse {\n\t\t\tlatlng = this._mouseMarker.getLatLng();\n\t\t\tthis._marker.setLatLng(latlng);\n\t\t}\n\t},\n\n\t_createMarker: function (latlng) {\n\t\treturn new L.Marker(latlng, {\n\t\t\ticon: this.options.icon,\n\t\t\tzIndexOffset: this.options.zIndexOffset\n\t\t});\n\t},\n\n\t_onClick: function () {\n\t\tthis._fireCreatedEvent();\n\n\t\tthis.disable();\n\t\tif (this.options.repeatMode) {\n\t\t\tthis.enable();\n\t\t}\n\t},\n\n\t_onTouch: function (e) {\n\t\t// called on click & tap, only really does any thing on tap\n\t\tthis._onMouseMove(e); // creates & places marker\n\t\tthis._onClick(); // permanently places marker & ends interaction\n\t},\n\n\t_fireCreatedEvent: function () {\n\t\tvar marker = new L.Marker.Touch(this._marker.getLatLng(), {icon: this.options.icon});\n\t\tL.Draw.Feature.prototype._fireCreatedEvent.call(this, marker);\n\t}\n});\n"]}