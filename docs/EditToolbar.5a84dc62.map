{"version":3,"sources":["resources/leaflet.draw/edit/EditToolbar.js"],"names":["L","EditToolbar","Toolbar","extend","statics","TYPE","options","edit","selectedPathOptions","dashArray","fill","fillColor","fillOpacity","maintainColor","remove","poly","featureGroup","initialize","_toolbarClass","prototype","call","_selectedFeatureCount","getModeHandlers","map","enabled","handler","Edit","title","drawLocal","toolbar","buttons","Delete","getActions","actions","save","text","callback","_save","context","cancel","disable","removeAllLayers","push","clearAll","_clearAllLayers","addToolbar","container","_checkDisabled","on","removeToolbar","off","_activeMode","revertLayers","button","hasLayers","getLayers","length","_modes","DomUtil","removeClass","addClass","setAttribute","editDisabled","removeDisabled"],"mappings":"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","file":"EditToolbar.5a84dc62.map","sourceRoot":"..","sourcesContent":["/*L.Map.mergeOptions({\n editControl: true\n });*/\n/**\n * @class L.EditToolbar\n * @aka EditToolbar\n */\nL.EditToolbar = L.Toolbar.extend({\n\tstatics: {\n\t\tTYPE: 'edit'\n\t},\n\n\toptions: {\n\t\tedit: {\n\t\t\tselectedPathOptions: {\n\t\t\t\tdashArray: '10, 10',\n\n\t\t\t\tfill: true,\n\t\t\t\tfillColor: '#fe57a1',\n\t\t\t\tfillOpacity: 0.1,\n\n\t\t\t\t// Whether to user the existing layers color\n\t\t\t\tmaintainColor: false\n\t\t\t}\n\t\t},\n\t\tremove: {},\n\t\tpoly: null,\n\t\tfeatureGroup: null /* REQUIRED! TODO: perhaps if not set then all layers on the map are selectable? */\n\t},\n\n\t// @method intialize(): void\n\tinitialize: function (options) {\n\t\t// Need to set this manually since null is an acceptable value here\n\t\tif (options.edit) {\n\t\t\tif (typeof options.edit.selectedPathOptions === 'undefined') {\n\t\t\t\toptions.edit.selectedPathOptions = this.options.edit.selectedPathOptions;\n\t\t\t}\n\t\t\toptions.edit.selectedPathOptions = L.extend({}, this.options.edit.selectedPathOptions, options.edit.selectedPathOptions);\n\t\t}\n\n\t\tif (options.remove) {\n\t\t\toptions.remove = L.extend({}, this.options.remove, options.remove);\n\t\t}\n\n\t\tif (options.poly) {\n\t\t\toptions.poly = L.extend({}, this.options.poly, options.poly);\n\t\t}\n\n\t\tthis._toolbarClass = 'leaflet-draw-edit';\n\t\tL.Toolbar.prototype.initialize.call(this, options);\n\n\t\tthis._selectedFeatureCount = 0;\n\t},\n\n\t// @method getModeHandlers(): object\n\t// Get mode handlers information\n\tgetModeHandlers: function (map) {\n\t\tvar featureGroup = this.options.featureGroup;\n\t\treturn [\n\t\t\t{\n\t\t\t\tenabled: this.options.edit,\n\t\t\t\thandler: new L.EditToolbar.Edit(map, {\n\t\t\t\t\tfeatureGroup: featureGroup,\n\t\t\t\t\tselectedPathOptions: this.options.edit.selectedPathOptions,\n\t\t\t\t\tpoly: this.options.poly\n\t\t\t\t}),\n\t\t\t\ttitle: L.drawLocal.edit.toolbar.buttons.edit\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: this.options.remove,\n\t\t\t\thandler: new L.EditToolbar.Delete(map, {\n\t\t\t\t\tfeatureGroup: featureGroup\n\t\t\t\t}),\n\t\t\t\ttitle: L.drawLocal.edit.toolbar.buttons.remove\n\t\t\t}\n\t\t];\n\t},\n\n\t// @method getActions(): object\n\t// Get actions information\n\tgetActions: function (handler) {\n\t\tvar actions = [\n\t\t\t{\n\t\t\t\ttitle: L.drawLocal.edit.toolbar.actions.save.title,\n\t\t\t\ttext: L.drawLocal.edit.toolbar.actions.save.text,\n\t\t\t\tcallback: this._save,\n\t\t\t\tcontext: this\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: L.drawLocal.edit.toolbar.actions.cancel.title,\n\t\t\t\ttext: L.drawLocal.edit.toolbar.actions.cancel.text,\n\t\t\t\tcallback: this.disable,\n\t\t\t\tcontext: this\n\t\t\t}\n\t\t];\n\n\t\tif (handler.removeAllLayers) {\n\t\t\tactions.push({\n\t\t\t\ttitle: L.drawLocal.edit.toolbar.actions.clearAll.title,\n\t\t\t\ttext: L.drawLocal.edit.toolbar.actions.clearAll.text,\n\t\t\t\tcallback: this._clearAllLayers,\n\t\t\t\tcontext: this\n\t\t\t});\n\t\t}\n\n\t\treturn actions;\n\t},\n\n\t// @method addToolbar(map): L.DomUtil\n\t// Adds the toolbar to the map\n\taddToolbar: function (map) {\n\t\tvar container = L.Toolbar.prototype.addToolbar.call(this, map);\n\n\t\tthis._checkDisabled();\n\n\t\tthis.options.featureGroup.on('layeradd layerremove', this._checkDisabled, this);\n\n\t\treturn container;\n\t},\n\n\t// @method removeToolbar(): void\n\t// Removes the toolbar from the map\n\tremoveToolbar: function () {\n\t\tthis.options.featureGroup.off('layeradd layerremove', this._checkDisabled, this);\n\n\t\tL.Toolbar.prototype.removeToolbar.call(this);\n\t},\n\n\t// @method disable(): void\n\t// Disables the toolbar\n\tdisable: function () {\n\t\tif (!this.enabled()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._activeMode.handler.revertLayers();\n\n\t\tL.Toolbar.prototype.disable.call(this);\n\t},\n\n\t_save: function () {\n\t\tthis._activeMode.handler.save();\n\t\tif (this._activeMode) {\n\t\t\tthis._activeMode.handler.disable();\n\t\t}\n\t},\n\n\t_clearAllLayers: function () {\n\t\tthis._activeMode.handler.removeAllLayers();\n\t\tif (this._activeMode) {\n\t\t\tthis._activeMode.handler.disable();\n\t\t}\n\t},\n\n\t_checkDisabled: function () {\n\t\tvar featureGroup = this.options.featureGroup,\n\t\t\thasLayers = featureGroup.getLayers().length !== 0,\n\t\t\tbutton;\n\n\t\tif (this.options.edit) {\n\t\t\tbutton = this._modes[L.EditToolbar.Edit.TYPE].button;\n\n\t\t\tif (hasLayers) {\n\t\t\t\tL.DomUtil.removeClass(button, 'leaflet-disabled');\n\t\t\t} else {\n\t\t\t\tL.DomUtil.addClass(button, 'leaflet-disabled');\n\t\t\t}\n\n\t\t\tbutton.setAttribute(\n\t\t\t\t'title',\n\t\t\t\thasLayers ?\n\t\t\t\t\tL.drawLocal.edit.toolbar.buttons.edit\n\t\t\t\t\t: L.drawLocal.edit.toolbar.buttons.editDisabled\n\t\t\t);\n\t\t}\n\n\t\tif (this.options.remove) {\n\t\t\tbutton = this._modes[L.EditToolbar.Delete.TYPE].button;\n\n\t\t\tif (hasLayers) {\n\t\t\t\tL.DomUtil.removeClass(button, 'leaflet-disabled');\n\t\t\t} else {\n\t\t\t\tL.DomUtil.addClass(button, 'leaflet-disabled');\n\t\t\t}\n\n\t\t\tbutton.setAttribute(\n\t\t\t\t'title',\n\t\t\t\thasLayers ?\n\t\t\t\t\tL.drawLocal.edit.toolbar.buttons.remove\n\t\t\t\t\t: L.drawLocal.edit.toolbar.buttons.removeDisabled\n\t\t\t);\n\t\t}\n\t}\n});\n"]}