{"version":3,"sources":["resources/leaflet.draw/draw/handler/Draw.Rectangle.js"],"names":["_hasAncestor","el","cls","parentElement","classList","contains","L","Draw","Rectangle","SimpleShape","extend","statics","TYPE","options","shapeOptions","stroke","color","weight","opacity","fill","fillColor","fillOpacity","showArea","clickable","metric","initialize","map","type","_initialLabelText","drawLocal","draw","handlers","rectangle","tooltip","start","prototype","call","disable","_enabled","_isCurrentlyTwoClickDrawing","_onMouseUp","e","_shape","target","_drawShape","latlng","setBounds","LatLngBounds","_startLatLng","_map","addLayer","_fireCreatedEvent","getBounds","_getTooltipText","tooltipText","latLngs","area","subtext","shape","_defaultShape","getLatLngs","GeometryUtil","geodesicArea","readableArea","text"],"mappings":";AA4FA,SAASA,EAAaC,EAAIC,GAClB,MAACD,EAAKA,EAAGE,iBAAmBF,EAAGG,UAAUC,SAASH,KAGlDD,OAAAA,EA3FRK,EAAEC,KAAKC,UAAYF,EAAEC,KAAKE,YAAYC,OAAO,CAC5CC,QAAS,CACRC,KAAM,aAGPC,QAAS,CACRC,aAAc,CACbC,QAAQ,EACRC,MAAO,UACPC,OAAQ,EACRC,QAAS,GACTC,MAAM,EACNC,UAAW,KACXC,YAAa,GACbC,UAAU,EACVC,WAAW,GAEZC,QAAQ,GAITC,WAAY,SAAUC,EAAKb,GAErBc,KAAAA,KAAOrB,EAAEC,KAAKC,UAAUI,KAExBgB,KAAAA,kBAAoBtB,EAAEuB,UAAUC,KAAKC,SAASC,UAAUC,QAAQC,MAErE5B,EAAEC,KAAKE,YAAY0B,UAAUV,WAAWW,KAAK,KAAMV,EAAKb,IAIzDwB,QAAS,WACH,KAAKC,WAILC,KAAAA,6BAA8B,EACnCjC,EAAEC,KAAKE,YAAY0B,UAAUE,QAAQD,KAAK,QAG3CI,WAAY,SAAUC,GAChB,KAAKC,QAAW,KAAKH,4BAMtB,KAAKA,8BAAgCvC,EAAayC,EAAEE,OAAQ,iBAIhErC,EAAEC,KAAKE,YAAY0B,UAAUK,WAAWJ,KAAK,MATvCG,KAAAA,6BAA8B,GAYrCK,WAAY,SAAUC,GAChB,KAAKH,OAIJA,KAAAA,OAAOI,UAAU,IAAIxC,EAAEyC,aAAa,KAAKC,aAAcH,KAHvDH,KAAAA,OAAS,IAAIpC,EAAEE,UAAU,IAAIF,EAAEyC,aAAa,KAAKC,aAAcH,GAAS,KAAKhC,QAAQC,cACrFmC,KAAAA,KAAKC,SAAS,KAAKR,UAM1BS,kBAAmB,WACdnB,IAAAA,EAAY,IAAI1B,EAAEE,UAAU,KAAKkC,OAAOU,YAAa,KAAKvC,QAAQC,cACtER,EAAEC,KAAKE,YAAY0B,UAAUgB,kBAAkBf,KAAK,KAAMJ,IAG3DqB,gBAAiB,WACZC,IAGHC,EAASC,EAAMC,EAHZH,EAAchD,EAAEC,KAAKE,YAAY0B,UAAUkB,gBAAgBjB,KAAK,MACnEsB,EAAQ,KAAKhB,OACbpB,EAAW,KAAKT,QAAQS,SASlB,OANHoC,IACHH,EAAU,KAAKb,OAAOiB,cAAgB,KAAKjB,OAAOiB,gBAAkB,KAAKjB,OAAOkB,aAChFJ,EAAOlD,EAAEuD,aAAaC,aAAaP,GACnCE,EAAUnC,EAAWhB,EAAEuD,aAAaE,aAAaP,EAAM,KAAK3C,QAAQW,QAAU,IAGxE,CACNwC,KAAMV,EAAYU,KAClBP,QAASA","file":"Draw.Rectangle.2b7650e3.map","sourceRoot":"..","sourcesContent":["/**\n * @class L.Draw.Rectangle\n * @aka Draw.Rectangle\n * @inherits L.Draw.SimpleShape\n */\nL.Draw.Rectangle = L.Draw.SimpleShape.extend({\n\tstatics: {\n\t\tTYPE: 'rectangle'\n\t},\n\n\toptions: {\n\t\tshapeOptions: {\n\t\t\tstroke: true,\n\t\t\tcolor: '#3388ff',\n\t\t\tweight: 4,\n\t\t\topacity: 0.5,\n\t\t\tfill: true,\n\t\t\tfillColor: null, //same as color by default\n\t\t\tfillOpacity: 0.2,\n\t\t\tshowArea: true,\n\t\t\tclickable: true\n\t\t},\n\t\tmetric: true // Whether to use the metric measurement system or imperial\n\t},\n\n\t// @method initialize(): void\n\tinitialize: function (map, options) {\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.Draw.Rectangle.TYPE;\n\n\t\tthis._initialLabelText = L.drawLocal.draw.handlers.rectangle.tooltip.start;\n\n\t\tL.Draw.SimpleShape.prototype.initialize.call(this, map, options);\n\t},\n\n\t// @method disable(): void\n\tdisable: function () {\n\t\tif (!this._enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isCurrentlyTwoClickDrawing = false;\n\t\tL.Draw.SimpleShape.prototype.disable.call(this);\n\t},\n\n\t_onMouseUp: function (e) {\n\t\tif (!this._shape && !this._isCurrentlyTwoClickDrawing) {\n\t\t\tthis._isCurrentlyTwoClickDrawing = true;\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure closing click is on map\n\t\tif (this._isCurrentlyTwoClickDrawing && !_hasAncestor(e.target, 'leaflet-pane')) {\n\t\t\treturn;\n\t\t}\n\n\t\tL.Draw.SimpleShape.prototype._onMouseUp.call(this);\n\t},\n\n\t_drawShape: function (latlng) {\n\t\tif (!this._shape) {\n\t\t\tthis._shape = new L.Rectangle(new L.LatLngBounds(this._startLatLng, latlng), this.options.shapeOptions);\n\t\t\tthis._map.addLayer(this._shape);\n\t\t} else {\n\t\t\tthis._shape.setBounds(new L.LatLngBounds(this._startLatLng, latlng));\n\t\t}\n\t},\n\n\t_fireCreatedEvent: function () {\n\t\tvar rectangle = new L.Rectangle(this._shape.getBounds(), this.options.shapeOptions);\n\t\tL.Draw.SimpleShape.prototype._fireCreatedEvent.call(this, rectangle);\n\t},\n\n\t_getTooltipText: function () {\n\t\tvar tooltipText = L.Draw.SimpleShape.prototype._getTooltipText.call(this),\n\t\t\tshape = this._shape,\n\t\t\tshowArea = this.options.showArea,\n\t\t\tlatLngs, area, subtext;\n\n\t\tif (shape) {\n\t\t\tlatLngs = this._shape._defaultShape ? this._shape._defaultShape() : this._shape.getLatLngs();\n\t\t\tarea = L.GeometryUtil.geodesicArea(latLngs);\n\t\t\tsubtext = showArea ? L.GeometryUtil.readableArea(area, this.options.metric) : '';\n\t\t}\n\n\t\treturn {\n\t\t\ttext: tooltipText.text,\n\t\t\tsubtext: subtext\n\t\t};\n\t}\n});\n\nfunction _hasAncestor(el, cls) {\n\twhile ((el = el.parentElement) && !el.classList.contains(cls)) {\n\t\t;\n\t}\n\treturn el;\n}\n"]}